<item>
<title>TV3-1</title>
<link>$doregex[m3u8]|Referer=http://player.ooyala.com/static/cacheable/a749e376b1fadc6784b96bd76a37692d/player_v2.swf?player=dde0012b6dcc4dc7b26306bdaff0dce2&amp;User-Agent=
Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0</link>
<regex>
<name>m3u8</name>
 
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):
import re
import base64
import requests
import urllib2
url = 'http://www.tonton.com.my/vindicia/playerOTP?id=J3ZmNmeDpV1EMWlR6YJU_YDCqKbh_bSg'
source = requests.get(url)
jsontoken = re.findall('token":"(.*?)"', source.text)[0]
token = jsontoken.replace('\/','/')
source1 = requests.get(token)
cookie1 = source1.cookies['auth_tokens_1']
url2 = 'http://player.ooyala.com/sas/player_api/v2/authorization/embed_code/owMjgyOkSbJagb4ozVY_03UrHYLt/J3ZmNmeDpV1EMWlR6YJU_YDCqKbh_bSg?device=html5&amp;domain=player.ooyala.com'
cookies ={'auth_tokens_1': cookie1}
source2 = requests.get(url2, cookies=cookies)
encodeddata = re.findall('data":"(.*?)"', source2.text)[0]
m3u8 = base64.b64decode(encodeddata)
return m3u8
]]></expres>
 
<page></page>
<referer></referer>
</regex>
</item>

<item>
<title>TV3-2</title>
<link>plugin://plugin.video.f4mTester/?streamtype=HDS&amp;maxbitrate=1264000&amp;url=$doregex[get-encoded-url]</link>
 <regex>
  <name>get-encoded-url</name>
  <expres>$pyFunction:urllib.quote_plus('http://tv3flashsecure-lh.akamaihd.net/z/tv3flash_sp@392287/manifest.f4m?hdnea=$doregex[token]&amp;hdcore=2.10.3&amp;g=RNGCROGJVVOX')</expres>
 </regex>
 <regex>
  <name>token</name>
  <expres><![CDATA[#$pyFunction
  def GetLSProData(page_data, Cookie_Jar, m):
	import requests
	import re

	session = requests.session()
	headers = {"User-Agent": "Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25",
	           "Referer": "http://www.tonton.com.my/login",
	           "Connection": "keep-alive"}
	r = session.get('http://www.tonton.com.my/vindicia/playerOTP?id=J3ZmNmeDpV1EMWlR6YJU_YDCqKbh_bSg&amp;account_id=067dcc18-d9ad-0904-95e4-4d7e8d63cb4c', headers=headers)
	token = re.findall(r'"token":"(.*?)"', r.text)[0].replace('\/', '/')
	r = session.get(token, headers=headers)
	headers = {'Referer': 'http://dpndczlul8yjf.cloudfront.net/resources/as3_vp_player_2.4.16.11.1.swf',
	           'User-Agent': 'Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25'}
	r = session.get('http://player.ooyala.com/sas/akamai_edge_auth_token?embed_code=J3ZmNmeDpV1EMWlR6YJU_YDCqKbh_bSg&amp;video_pcode=owMjgyOkSbJagb4ozVY_03UrHYLt', headers=headers)
	return r.text
  ]]></expres>
 </regex>
</item>

<item>
<title>TV3-3</title>
<link>plugin://plugin.video.f4mTester/?streamtype=HLS&amp;url=$doregex[EncodedM3u8]</link>
<regex>
<name>EncodedM3u8</name>
<expres>$pyFunction:urllib.quote_plus('$doregex[getHiResM3u8]')</expres>
<page></page>
</regex>
<regex>
<name>getHiResM3u8</name>
<expres>139.*\s.*?(http.*)</expres>
<page>https://www.layarku.tv/media/tv3sec.php?url=https://www.layarku.tv/media2/tvmysec.m3u8</page>
<referer>http://ssl.p.jwpcdn.com/player/v/7.4.3/jwplayer.flash.swf</referer>
<agent>Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25</agent>
<cookieJar>$doregex[LoginAndCookies]</cookieJar>
</regex>
<regex>
<name>LoginAndCookies</name>
<expres></expres>
<page>http://www.layarku.tv/forum/ucp.php?mode=login</page>
<referer>http://www.layarku.tv/media/membertv3.php</referer>
<rawpost>username=xxx&amp;password=xxx&amp;login=Login&amp;redirect=https://www.layarku.tv/media/membertv3.php</rawpost>
<agent>Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25</agent>
<cookieJar></cookieJar>
</regex>
</item>

<item>
<title>TVAL</title>
<link>plugin://plugin.video.f4mTester/?streamtype=HLS&amp;url=$doregex[encodedurl]</link>
<regex>
<name>encodedurl</name>
<expres>$pyFunction:urllib.quote_plus('$doregex[get=URL]]')</expres>
<page></page>
</regex>
<regex>
<name>get=URL</name>
<expres><![CDATA[#$pyFunction
import requests, re
def GetLSProData(page_data,Cookie_Jar,m,url = 'https://www.layarku.tv/media/ahlive.php?url=http://nx-cdn.mynexa.my/tvahlive/smil:tvah_hypptv.smil/playlist.m3u8'):
 headers = {'User-Agent': 'Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25','Referer': 'https://www.layarku.tv/media/ahtv.php'}
 source = requests.get(url, headers=headers)
 m3u8 = re.findall('BANDWIDTH=[\d\D]*\n.*?([^\"]+)', source.text)[0]
 return m3u8 + '|headers'
]]></expres>
<page></page>
<cookieJar></cookieJar>
</regex>
<accept>*/*</accept>
<x-req>ShockwaveFlash/21.0.0.242</x-req>
</item>

<item>
<title>CNA</title>
<link>plugin://plugin.video.f4mTester/?url=http://imtcnai-lh.akamaihd.net/z/cnai_main@334572/manifest.f4m?hdcore=3.2
&amp;streamtype=TSDOWNLOADER</link>
<thumbnail></thumbnail>
</item>

<channel>
<name>[COLOR skyblue]VIDEO : ANIMATION MOVIES[/COLOR] (BETA RELEASE)</name>
<thumbnail>http://community-links.googlecode.com/svn/icons/news-icon.png</thumbnail>
<items xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<item>
<title>[COLOR skyblue]ANIMATION[/COLOR]</title>
<link>$doregex[makelist]</link>
<regex>
      <name>makelist</name>
      <listrepeat><![CDATA[
               <title>[makelist.param2]</title>
               <link>$doregex[makelist2]</link>
               <thumbnail>http://i376.photobucket.com/albums/oo204/indiecrew/MR%20Network%20TV/flag_world_zpsic7ttnuh.png</thumbnail>
      ]]></listrepeat>
      <expres><![CDATA[mega-links-head"  href="\/tag\/(.*?)">(.*?)<\/a]]><expres>
      <page>http://pubfilm.com/</page>
      <cookieJar></cookieJar>
</regex>>
<regex>
      <name>makelist2</name>
      <listrepeat><![CDATA[
               <title>Page [makelist2.param1]</title>
               <link>$doregex[makelist3]</link>
               <thumbnail>http://i376.photobucket.com/albums/oo204/indiecrew/MR%20Network%20TV/flag_world_zpsic7ttnuh.png</thumbnail>
      ]]></listrepeat>
      <expres><![CDATA[>([1-9])<\/(?:.*?>)<a]]></expres>
      <page>http://pubfilm.com/tag/[makelist.param1]</page>
</regex>
<regex>
      <name>makelist3</name>
      <listrepeat><![CDATA[
               <title>[makelist3.param4] ([makelist3.param1] )</title>
               <link>$doregex[finalURL]</link>
               <thumbnail>[makelist3.param2]</thumbnail>
      ]]></listrepeat>
      <expres><![CDATA[f_tag">(.*?)<\/.*\n.*\n.*\n.*src="([^"]*)".*\n.*\n.*\n.*\n.*post-box-title"><a href="([^"]*)".*?>(.*?)<\/a]]></expres>
      <page>http://pubfilm.com/tag/[makelist.param1]/page/[makelist2.param1]</page>
</regex>
<regex>
    <name>finalURL</name>
    <expres>$pyFunction: '$doregex[720]' if not '$doregex[720]'=='' else '$doregex[480]'</expres>
    <page></page>
</regex>
<regex>
      <name>720</name>
      <expres>file":"([^"]+)","type":"mp4","label":"[6-7]<expres>
      <page>$doregex[get-api]</page>
      <referer>[makelist3.param3]</referer>
      <cookieJar></cookieJar>
</regex>
<regex>
      <name>480</name>
      <expres>file":"([^"]+)","type":"mp4","label":"[4-5]<expres>
      <page>$doregex[get-api]</page>
      <referer>[makelist3.param3]</referer>
      <cookieJar></cookieJar>
</regex>
<regex>
      <name>get-api</name>
      <expres>href=[",'](http.*\/api\/player\.php.*?)[",']<expres>
      <page>[makelist3.param3]</page>
      <referer>http://pubfilm.com/tag/animation</referer>
      <cookieJar></cookieJar>
</regex>
<thumbnail>http://i376.photobucket.com/albums/oo204/indiecrew/MR%20Network%20TV/flag_world_zpsic7ttnuh.png</thumbnail>
</item>
</items>
</channel>
